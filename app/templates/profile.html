{% extends "base.html" %}

{% block content %}

<!-- Page Header -->
<div class="page-header">
    <h1 class="page-title">Profile</h1>
    <p class="page-subtitle">
        <i class="fa-solid fa-user-circle"></i>
        Manage your account settings and preferences
    </p>
</div>

<!-- Flash Messages -->
{% with messages = get_flashed_messages() %}
{% if messages %}
    {% for message in messages %}
    <div class="alert alert-dismissible fade show" role="alert" style="background-color: rgba(16, 185, 129, 0.1); border: 1px solid var(--success); color: var(--text-primary); border-radius: var(--radius-md); margin-bottom: 1.5rem;">
        <i class="fa-solid fa-circle-check"></i>
        <strong>Success!</strong> {{ message }}
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
{% endif %}
{% endwith %}

<!-- Profile Options Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">

    <!-- Change Password Card -->
    <div class="metric-card">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div style="width: 3rem; height: 3rem; background: linear-gradient(135deg, var(--accent), #60a5fa); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                <i class="fa-solid fa-lock"></i>
            </div>
            <div>
                <h3 style="margin: 0; font-size: 1.1rem; color: var(--text-primary);">Password</h3>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">Update your account password</p>
            </div>
        </div>
        <button class="btn-primary-modern btn-modern" style="width: 100%;" data-bs-toggle="modal" data-bs-target="#pwmodal">
            <i class="fa-solid fa-key"></i> Change Password
        </button>
    </div>

</div>

<!-- Change Password Modal -->
<div class="modal fade modal-modern" id="pwmodal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fa-solid fa-key"></i> Change Password
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form action="{{url_for('main.changepw')}}" method="POST">
                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fa-solid fa-lock"></i> Current Password
                        </label>
                        <input class="form-control-modern" type="password" name="current" placeholder="Enter your current password" required>
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fa-solid fa-lock-open"></i> New Password
                        </label>
                        <input class="form-control-modern" type="password" name="password" placeholder="Choose a new password" required>
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fa-solid fa-shield-halved"></i> Confirm New Password
                        </label>
                        <input class="form-control-modern" type="password" name="password2" placeholder="Re-enter your new password" required>
                    </div>

                    <div style="display: flex; gap: 0.5rem; margin-top: 1.5rem;">
                        <button class="btn-primary-modern btn-modern" type="submit" style="flex: 1;">
                            <i class="fa-solid fa-check"></i>
                            Update Password
                        </button>
                        <button type="button" class="btn-outline-modern btn-modern" data-bs-dismiss="modal">
                            <i class="fa-solid fa-xmark"></i>
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}
